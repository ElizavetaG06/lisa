public class BubbleSortBasic {
    
    /**
     * Классическая реализация сортировки пузырьком
     * Сложность: O(n²) в худшем случае
     */
    public static void bubbleSort(int[] array) {
        int n = array.length;
        
        // Внешний цикл для проходов по массиву
        for (int i = 0; i < n - 1; i++) {
            // Внутренний цикл для сравнения соседних элементов
            for (int j = 0; j < n - 1 - i; j++) {
                // Если текущий элемент больше следующего, меняем их местами
                if (array[j] > array[j + 1]) {
                    // Обмен элементов
                    int temp = array[j];
                    array[j] = array[j + 1];
                    array[j + 1] = temp;
                }
            }
        }
    }
    
    /**
     * Визуализация процесса сортировки
     */
    public static void bubbleSortWithVisualization(int[] array) {
        System.out.println("Начальный массив: ");
        printArray(array);
        System.out.println();
        
        int n = array.length;
        int totalSwaps = 0;
        int totalComparisons = 0;
        
        for (int i = 0; i < n - 1; i++) {
            System.out.println("Проход " + (i + 1) + ":");
            int swapsInPass = 0;
            
            for (int j = 0; j < n - 1 - i; j++) {
                totalComparisons++;
                System.out.printf("  Сравниваем элементы [%d]=%d и [%d]=%d", 
                                 j, array[j], j+1, array[j+1]);
                
                if (array[j] > array[j + 1]) {
                    // Обмен элементов
                    int temp = array[j];
                    array[j] = array[j + 1];
                    array[j + 1] = temp;
                    swapsInPass++;
                    totalSwaps++;
                    
                    System.out.println(" -> МЕНЯЕМ местами ✓");
                } else {
                    System.out.println(" -> порядок правильный");
                }
            }
            
            System.out.print("  Массив после прохода " + (i + 1) + ": ");
            printArray(array);
            System.out.println("  Перестановок в этом проходе: " + swapsInPass);
            System.out.println();
            
            // Если в проходе не было перестановок - массив отсортирован
            if (swapsInPass == 0) {
                System.out.println("! Массив уже отсортирован, завершаем раньше.");
                break;
            }
        }
        
        System.out.println("Итого: сравнений = " + totalComparisons + 
                         ", перестановок = " + totalSwaps);
    }
    
    /**
     * Вывод массива в консоль
     */
    public static void printArray(int[] array) {
        System.out.print("[");
        for (int i = 0; i < array.length; i++) {
            System.out.print(array[i]);
            if (i < array.length - 1) {
                System.out.print(", ");
            }
        }
        System.out.println("]");
    }
    
    /**
     * Тестирование алгоритма
     */
    public static void main(String[] args) {
        System.out.println("=== ТЕСТИРОВАНИЕ СОРТИРОВКИ ПУЗЫРЬКОМ ===\n");
        
        // Тест 1: Случайный массив
        System.out.println("Тест 1: Случайный массив");
        int[] array1 = {64, 34, 25, 12, 22, 11, 90};
        System.out.print("До сортировки: ");
        printArray(array1);
        
        bubbleSort(array1);
        System.out.print("После сортировки: ");
        printArray(array1);
        System.out.println();
        
        // Тест 2: Уже отсортированный массив
        System.out.println("Тест 2: Уже отсортированный массив");
        int[] array2 = {1, 2, 3, 4, 5, 6};
        System.out.print("До сортировки: ");
        printArray(array2);
        
        bubbleSort(array2);
        System.out.print("После сортировки: ");
        printArray(array2);
        System.out.println();
        
        // Тест 3: Массив в обратном порядке
        System.out.println("Тест 3: Массив в обратном порядке");
        int[] array3 = {6, 5, 4, 3, 2, 1};
        System.out.print("До сортировки: ");
        printArray(array3);
        
        bubbleSort(array3);
        System.out.print("После сортировки: ");
        printArray(array3);
        System.out.println();
        
        // Тест 4: Визуализация процесса сортировки
        System.out.println("Тест 4: Визуализация процесса сортировки");
        System.out.println("=" .repeat(50));
        int[] array4 = {5, 1, 4, 2, 8};
        bubbleSortWithVisualization(array4);
    }
}
